<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Filtro</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="js/script.js"></script>
</head>
<body>
    <div class="container">
        <h1 style="text-align: center; font-family: Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif; font-style: italic;">Filtro por ID</h1>
        <div class="row">
            <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12" >
                IdDish:  <select name="" id="id2">
                    <br>
                        <option value="---">----</option>
                        <script>
                            loadData()
                              .then((result) => {
                                if( result.state ){
                                  const ts = document.getElementById('id2')
                                  ts.innerHTML='';
                  
                                  result.data.forEach( dish => {
                                    const option = document.createElement('option')
                  
                                    option.value = dish.idDish;
                                    option.text = dish.idDish;
                                    ts.appendChild(option);
                                    
                                  })
                                }else{
                                  alert('Ho!! Algo ha salido mal')
                                }
                              })
                              .catch(err=>console.log(err))
                          </script>
                </select>
                <button id="b2" type="button" class="btn btn-info">Filtrar</button>
               
                <table class=" table table-hover">
                    
                    <thead>
                        
                        <tr>
                            
                            <th>idDish</th>
                            <th>Name</th>
                            <th>Calories</th>
                            <th>Is vegetarian?</th>
                            <th>Value</th>
                            <th>Comments</th>
                        </tr>
                    </thead>
                    <tbody id="datosf">
                        <script>
    var selecN=document.getElementById('id2');
    var b2=document.getElementById('b2');
    var body2 =document.getElementById('datosf');
b2.addEventListener('click',()=>{
    body2.innerHTML="";
    if(!selecN.selectedIndex===0){
      loadData()
        .then((result) => {
          if( result.state ){
            const tBody = document.getElementById('datost')

            result.data.forEach( dish => {
              const row = document.createElement('tr')

              const colId = document.createElement('td')

              colId.appendChild(document.createTextNode(dish.idDish))

              row.append(colId)

              const colName = document.createElement('td')

              colName.appendChild( document.createTextNode(dish.name))
              row.appendChild(colName)
              const colCalories = document.createElement('td')

              colCalories.appendChild( document.createTextNode(dish.calories))
              row.appendChild(colCalories)
              const colVegetarian= document.createElement('td')

              colVegetarian.appendChild( document.createTextNode(dish.isVegetarian))
              row.appendChild(colVegetarian)
              const colValue = document.createElement('td')

              colValue.appendChild( document.createTextNode(dish.value))
              row.appendChild(colValue)
              const colComments = document.createElement('td')

              colComments.appendChild( document.createTextNode(dish.comments))
              row.appendChild(colComments)

              tBody.appendChild(row)
            })
          }else{
            alert('Ho!! Algo ha salido mal')
          }
        })
        .catch(err=>console.log(err))
    }
  })
   
                        </script>
                    </tbody>
                </table>
                

            </div>
        </div>
    </div>
    
</body>
</html>